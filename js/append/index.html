<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>append child DOM API </title>
</head>

<body>
  <ul id="students">
  </ul>
  <script>
    const students = [
      {
        id: 1,
        name: '刘策',
        github: 'https://github.com/2941187216/lesson-bm'
      },
      {
        id: 2,
        name: 'huang',
        github: 'https://github.com/huangyichao0916/lesson_bm'
      },
      {
        id: 3,
        name: '刘巧纯',
        github: 'https://github.com/qiaochunliu77/lesson_bm'
      }
    ]
    // students  append #root
    // arr -> map  ->  html arr -> join   -> url
    // DOM 动态编程
    // innerHTML  /   appendChild
    // html标签还可以用js 来创建
    // js  跟 html 联系起来 

    // li 没选中  内存中是节点对象了， append html
    // js 节点对象 -》 html 对象的转化

    const oUl = document.getElementById('students');
    oUl.addEventListener('click', function () {
      alert('!!!');
      insertBefore
    })
    oUl.style.fontSize = '20px';

    // console.log(typeof oLi);
    // console.log(oLi);
    // console.log(oLi.nodeType);
    // console.log(typeof oText);
    // console.log(oText);
    // console.log(oText.nodeType);

    const fragment = document.createDocumentFragment(); //垫片  文档碎片
    for (let student of students) {
      const oLi = document.createElement('li');
      oLi.className = 'item';
      const oA = document.createElement('a');
      oA.setAttribute('href', student.github);
      oA.setAttribute('target', '_blank')
      const oText = document.createTextNode(student.name);
      oA.appendChild(oText);
      // oA.addEventListener('click',function (event) {
      //   event.preventDefault();
      //   alert(this.innerText);
      // })
      oLi.appendChild(oA);
      fragment.appendChild(oLi);  //fragment在内存中
      // oUl.appendChild(oLi); 
      //性能问题  页面的3次重新绘制和刷新 appendChild li -> ul
      // js的DOM操作 性能消耗巨大
    }
    oUl.appendChild(fragment);  //只进行一次绘制和刷新来优化性能

     // 请在students 节点挂载到 ul 后，li 加上 id值的节点
    const studentLis = document.querySelectorAll('.item');
    console.log(studentLis);
    studentLis.forEach((li, index) => {
      let oA = li.querySelector('a');
      console.log(oA);
      const oSpan = document.createElement('span');
      oSpan.appendChild(document.createTextNode(students[index].id));
      li.insertBefore(oSpan, oA)
      // studentLis 伪数组 for forEach  length 下标访问 仅次而已
      // 伪数组 变成 真正的数组
      // console.log(studentLis[0].childNodes[0].innerText);
      // console.log([...studentLis].filter(li => { //   
      //   return li.childNodes[0].innerText == '刘策';
    })

  </script>
</body>

</html>